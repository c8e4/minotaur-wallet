{"version":3,"file":"scripts/content.js","mappings":";;;;;AAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;;AAEA;AACA;;ACbiD;;AAEjD;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEe;AACf,kBAAkB,sBAAsB;AACxC;AACA;AACA,MAAM,eAAc;AACpB,KAAK;AACL;AACA,KAAK;AACL;;AAEA;AACA;;AC1Be;AACf;AACA;AACA;AACA;;AAEA;AACA;;ACPiD;AAClC;AACf;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH,kBAAkB,eAAc;AAChC;;ACjBe;AACf;AACA;AACA;AACA;AACA;;ACLe;AACf;AACA;AACA;;AAEA;AACA,gFAAgF;AAChF;AACA,IAAI;AACJ;AACA;AACA;;ACXe;AACf;;AAEA;AACA;AACA,IAAI;AACJ;AACA,GAAG;AACH;;ACRe;AACf;AACA;AACA;;AAEA;AACA;;ACNkC;AAC6B;AAChD;AACf,eAAe,OAAO;AACtB;AACA,IAAI;AACJ;AACA;;AAEA,SAAS,sBAAqB;AAC9B;;ACViD;AACoB;AACE;AACxD;AACf,kCAAkC,yBAAwB;AAC1D;AACA,gBAAgB,eAAc;AAC9B;;AAEA;AACA,sBAAsB,eAAc;AACpC;AACA,MAAM;AACN;AACA;;AAEA,WAAW,0BAAyB;AACpC;AACA;;AClBA;AACA,kBAAkB,kBAAkB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe;AACf;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;ACjBe;AACf;AACA;AACA;AACA;;GCsBMA,CAAAA,6CAcJ,6BAAwB,CACtB,WADsB,6DAbhBC,QAagB,CAPpB,CACFC,SAAS,CAAE,CADT,CAEFC,QAAQ,CAAE,GAAIC,CAAAA,GAAJ,EAFR,CAOoB,MAFdC,gBAEc,CAFK,EAEL,MAIdC,KAJc,CAIN,UAAM,CACtBC,MAAM,CAACC,gBAAP,CAAwB,SAAxB,CAAmC,KAAI,CAACC,YAAxC,EACD,CANuB,MAQdC,OARc,CAQJ,SA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","sources":["../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/inherits.js","../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/@babel/runtime/helpers/esm/createSuper.js","../node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","connector/service/chrome/content.ts"],"sourcesContent":["export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return assertThisInitialized(self);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nimport possibleConstructorReturn from \"./possibleConstructorReturn.js\";\nexport default function _createSuper(Derived) {\n  var hasNativeReflectConstruct = isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","import {\n  EventData,\n  SignTxResponsePayload,\n  SubmitTxResponsePayload,\n} from '../types';\nimport * as wasm from 'ergo-lib-wasm-browser';\nimport {\n  TxSendError,\n  TxSignError,\n} from '../../../components/pages/dapp-connector/errorTypes';\nimport { UnsignedGeneratedTx } from '../../../util/interface';\n\ndeclare global {\n  interface Window {\n    ergoConnector?: { [key: string]: any };\n    ergo_request_read_access: (message_server_address?: string) => any;\n    ergo_check_read_access: () => any;\n    connect: (msg: any) => any;\n    ergo?: MinotaurApi;\n  }\n}\n\ntype Paginate = {\n  page: number;\n  limit: number;\n};\nclass ExtensionConnector {\n  private resolver: {\n    currentId: number;\n    requests: Map<\n      string,\n      { resolve: (value: any) => any; reject: (err?: any) => any }\n    >;\n  } = {\n    currentId: 1,\n    requests: new Map(),\n  };\n\n  protected processEventType = '';\n\n  protected constructor() {\n    /* empty */\n  }\n\n  protected setup = () => {\n    window.addEventListener('message', this.eventHandler);\n  };\n\n  protected rpcCall = (func: string, params?: any) => {\n    return new Promise((resolve, reject) => {\n      const msg = {\n        type: this.processEventType,\n        direction: 'request',\n        requestId: `${this.resolver.currentId}`,\n        function: func,\n        payload: params,\n      };\n      console.log('new message to send: ', msg);\n      window.postMessage(msg);\n      this.resolver.requests.set(`${this.resolver.currentId}`, {\n        resolve: resolve,\n        reject: reject,\n      });\n      this.resolver.currentId++;\n    });\n  };\n\n  private eventHandler = (event: MessageEvent<EventData>) => {\n    if (\n      event.data.type === this.processEventType &&\n      event.data.direction === 'response'\n    ) {\n      const promise = this.resolver.requests.get(event.data.requestId);\n      console.log(event, promise);\n      if (promise !== undefined) {\n        this.resolver.requests.delete(event.data.requestId);\n        const ret = event.data;\n        if (ret.isSuccess) {\n          this.processEvent(ret, promise.resolve);\n        } else {\n          promise.reject(ret);\n        }\n      }\n    }\n  };\n\n  protected processEvent = (\n    data: EventData,\n    callback: (content: any) => any\n  ) => {\n    callback(data);\n  };\n}\n\nclass MinotaurConnector extends ExtensionConnector {\n  private static instance?: MinotaurConnector;\n  protected processEventType = 'auth';\n\n  static getInstance = () => {\n    if (!MinotaurConnector.instance) {\n      MinotaurConnector.instance = new MinotaurConnector();\n      MinotaurConnector.instance.setup();\n    }\n    return MinotaurConnector.instance;\n  };\n\n  connect = (url?: string): Promise<boolean> => {\n    return new Promise<boolean>((resolve, reject) => {\n      this.rpcCall('connect', { server: url })\n        .then((res) => resolve(true))\n        .catch(() => reject());\n    });\n  };\n\n  is_connected = (): Promise<boolean> => {\n    return new Promise<boolean>((resolve, reject) => {\n      this.rpcCall('is_connected')\n        .then((res) => resolve((res as EventData).payload as boolean))\n        .catch(() => reject());\n    });\n  };\n  protected processEvent = (\n    data: EventData,\n    callback: (content: any) => any\n  ) => {\n    if (data.isSuccess) {\n      window.ergo = MinotaurApi.getInstance();\n      callback(data);\n    }\n  };\n}\n\nclass MinotaurApi extends ExtensionConnector {\n  private static instance?: MinotaurApi;\n  protected processEventType = 'call';\n\n  static getInstance = () => {\n    if (!MinotaurApi.instance) {\n      MinotaurApi.instance = new MinotaurApi();\n      MinotaurApi.instance.setup();\n    }\n    return MinotaurApi.instance;\n  };\n\n  get_used_addresses = (paginate?: Paginate) => {\n    return new Promise<Array<string>>((resolve, reject) => {\n      this.rpcCall('address', { type: 'used', page: paginate })\n        .then((res) => {\n          const data: EventData = res as EventData;\n          resolve(data.payload as Array<string>);\n        })\n        .catch((err: any) => reject(err));\n    });\n  };\n\n  get_unused_addresses = (paginate?: Paginate) => {\n    return new Promise<Array<string>>((resolve, reject) => {\n      this.rpcCall('address', { type: 'unused', page: paginate })\n        .then((res) => {\n          const data: EventData = res as EventData;\n          resolve(data.payload as Array<string>);\n        })\n        .catch((err: any) => reject(err));\n    });\n  };\n\n  get_change_address = () => {\n    return new Promise<string>((resolve, reject) => {\n      this.rpcCall('address', { type: 'change' })\n        .then((res) => {\n          console.log('res is ', res);\n          const data: EventData = res as EventData;\n          const addresses = data.payload as Array<string>;\n          if (addresses.length > 0) {\n            resolve(addresses[0]);\n          } else {\n            reject();\n          }\n        })\n        .catch((err: any) => reject(err));\n    });\n  };\n\n  get_balance = (\n    token_id = 'ERG',\n    ...token_ids: Array<string>\n  ): Promise<bigint | { [id: string]: bigint }> => {\n    return new Promise<bigint | { [id: string]: bigint }>((resolve, reject) => {\n      this.rpcCall('balance', { tokens: [token_id, ...token_ids] })\n        .then((res) => {\n          console.log(res);\n          const data = (res as EventData).payload as { [id: string]: string };\n          const output: { [id: string]: bigint } = {};\n          if (token_ids.length) {\n            output[token_id] = BigInt(data[token_id]);\n            token_ids.forEach((token) => {\n              const tokenIdOrErg = token ? token : 'ERG';\n              output[tokenIdOrErg] = BigInt(data[tokenIdOrErg]);\n            });\n            resolve(output);\n          } else {\n            resolve(BigInt(data[token_id ? token_id : 'ERG']));\n          }\n        })\n        .catch(() => reject());\n    });\n  };\n\n  get_utxos = (amount?: bigint, token_id = 'ERG', paginate?: Paginate) => {\n    return new Promise<Array<wasm.ErgoBox> | undefined>((resolve, reject) => {\n      this.rpcCall('boxes', {\n        amount: amount,\n        token_id: token_id,\n        paginate: paginate,\n      })\n        .then((res) => {\n          const data = (res as EventData).payload as\n            | Array<wasm.ErgoBox>\n            | undefined;\n          resolve(data);\n        })\n        .catch(() => reject());\n    });\n  };\n\n  sign_tx = (tx: UnsignedGeneratedTx) => {\n    return new Promise<wasm.Transaction | TxSignError>((resolve, reject) => {\n      this.rpcCall('sign', {\n        utx: tx,\n      })\n        .then((res) => {\n          const data = (res as EventData).payload as SignTxResponsePayload;\n          const response = data.error ? data.error : data.stx;\n          resolve(response!);\n        })\n        .catch(() => reject());\n    });\n  };\n\n  submit_tx = (tx: wasm.Transaction) => {\n    return new Promise<string | TxSendError>((resolve, reject) => {\n      this.rpcCall('submit', {\n        utx: tx,\n      })\n        .then((res) => {\n          const data = (res as EventData).payload as SubmitTxResponsePayload;\n          const response = data.error ? data.error : data.TxId;\n          resolve(response!);\n        })\n        .catch(() => reject());\n    });\n  };\n}\n\n// sign_tx_input = (tx, index) => {\n//     return this._rpcCall(\"signTxInput\", [tx, index]);\n// }\n\n// sign_data = (addr, message) => {\n//     return this._rpcCall(\"signData\", [addr, message]);\n// }\n\n// _rpcCall = (func: string, params?: any) => {\n//     return new Promise((resolve, reject) => {\n//         window.postMessage({\n//             type: \"rpc/connector-request\",\n//             requestId: this.resolver.currentId,\n//             function: func,\n//             params\n//         });\n//         this.resolver.requests.set(this.resolver.currentId, {resolve: resolve, reject: reject});\n//         this.resolver.currentId++;\n//     });\n// }\n//\n//     eventHandler = (event) => {\n//         if (event.data.type === \"rpc/connector-response\") {\n//             console.debug(JSON.stringify(event.data));\n//             const promise = this.resolver.requests.get(event.data.requestId);\n//             if (promise !== undefined) {\n//                 this.resolver.requests.delete(event.data.requestId);\n//                 const ret = event.data.return;\n//                 if (ret.isSuccess) {\n//                     promise.resolve(ret.data);\n//                 } else {\n//                     promise.reject(ret.data);\n//                 }\n//             }\n//         }\n//     };\n//\n// }\n\nconst setupErgo = () => {\n  if (window.ergoConnector !== undefined) {\n    window.ergoConnector = {\n      ...window.ergoConnector,\n      minotaur: Object.freeze(MinotaurConnector.getInstance()),\n    };\n  } else {\n    window.ergoConnector = {\n      minotaur: Object.freeze(MinotaurConnector.getInstance()),\n    };\n  }\n\n  const warnDeprecated = function (func: string) {\n    console.warn(\n      \"[Deprecated] In order to avoid conflicts with another wallets, this method will be disabled and replaced by '\" +\n        func +\n        \"' soon.\"\n    );\n  };\n\n  if (!window.ergo_request_read_access && !window.ergo_check_read_access) {\n    window.ergo_request_read_access = function () {\n      warnDeprecated('ergoConnector.minotaur.connect()');\n      return MinotaurConnector.getInstance()\n        .connect()\n        .then((res) => null);\n    };\n    window.ergo_check_read_access = function () {\n      warnDeprecated('ergoConnector.minotaur.isConnected()');\n      return MinotaurConnector.getInstance()\n        .is_connected()\n        .then((res) => null);\n    };\n  }\n};\n\nsetupErgo();\n// export default setupErgo;\n"],"names":["ExtensionConnector","resolver","currentId","requests","Map","processEventType","setup","window","addEventListener","eventHandler","rpcCall","func","params","Promise","resolve","reject","msg","type","direction","requestId","function","payload","console","log","postMessage","set","event","data","promise","get","undefined","delete","ret","isSuccess","processEvent","callback","MinotaurConnector","connect","url","server","then","res","catch","is_connected","ergo","MinotaurApi","getInstance","instance","get_used_addresses","paginate","page","err","get_unused_addresses","get_change_address","addresses","length","get_balance","token_id","token_ids","tokens","output","BigInt","forEach","token","tokenIdOrErg","get_utxos","amount","sign_tx","tx","utx","response","error","stx","submit_tx","TxId","setupErgo","ergoConnector","minotaur","Object","freeze","warnDeprecated","warn","ergo_request_read_access","ergo_check_read_access"],"sourceRoot":""}